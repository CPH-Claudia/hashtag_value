# hashtag_value
拜訪備註欄標籤價值計算

1. 備註文字拆解
    - 程式碼原檔：hashtag_process.py
    - Function Name：process_visit
    - 前置欄位 💡提醒：欄位格式要先轉
        
2. #直向
    - 程式碼原檔：hashtag_long.py
    - Function Name：script
      
3. 計算#價值
    
    > #價值 = 出現在某次拜訪中的標記，是否常伴隨「該次拜訪之後、同賽期內」的實際成交價值
    > 
    - 程式碼原檔：hashtag_value.py
    - Function Name：script
    - 欄位
        - A. 拜訪
            - 粒度：一筆拜訪一列
        
            - 包含：客戶 key（cust_key / 客戶UUID）、拜訪日（normalize 到 date）、拜訪紀錄 UUID、拜訪備註（用來拆 #）、hashtag_list（同一拜訪內去重）
      
        - B. 保單
            - 粒度：一張保單一列
            
            - 包含：客戶 key、投保日（normalize 到 date）、保單 ID、FYC（之後計算價值用）
            
    - 競賽期間定義
        
        依「拜訪發生時間」判定賽期
        
        - **夏賽**：1–6 月 → 賽期結束日 = 當年度 **6/30**
        - **冬賽**：9–12 月 → 賽期結束日 = 當年度 **12/31**
        
        📌 不跨年度、不跨賽期
        
    - 哪些保單會被計入？
        
        一張保單會被計入某次拜訪的價值，需同時符合：
        
        ```
        投保日 ≥ 拜訪日
        AND
        投保日 ≤ 該拜訪所屬賽期的結束日
        ```
        
        例子
        
        - 拜訪日：2026/2/2（夏賽）
        - 有效成交期間：**2026/2/2 ～ 2026/6/30**
        - 2027/2/2 的成交 ❌ 不會被算進來
